function initializeCheckboxes(){$("input:radio, input:checkbox").checkedPolyfill(),$("body").on("click",".checkbox input:checkbox",function(){$(this).is(":checked")?$(this).parent().addClass("chacked"):$(this).parent().removeClass("chacked")}),$(".checkbox input:checkbox").each(function(){$(this).is(":checked")?$(this).parent().addClass("chacked"):$(this).parent().removeClass("chacked")})}$(document).ready(function(){function a(a){$(".comiseo-daterangepicker").css({top:a.offset().top+a.height(),left:a.offset().left+b,width:a.width()-2*b,"min-width":a.width()-2*b}),$(".datepicker_bottom_block").css({top:a.outerHeight()+$(".comiseo-daterangepicker").outerHeight(),left:b}),a.find(".calendar_block").show()}var b=19;$(".datepicker").length&&($(".datepicker").daterangepicker({datepickerOptions:{numberOfMonths:1,firstDay:1,maxDate:null},onChange:function(a){setTimeout(function(){var b=a.dpDiv.find(".ui-state-highlight-start"),c=a.dpDiv.find(".ui-state-highlight-end"),d=("0"+b.find("a").text()).slice(-2),e=("0"+b.data("month")).slice(-2),f=b.data("year"),g=("0"+c.find("a").text()).slice(-2),h=("0"+c.data("month")).slice(-2),i=c.data("year"),j=d&&e&&f?d+"."+e+"."+f:"",k=g&&h&&i?g+"."+h+"."+i:"";$(".calendarWrap.active").find(".calendar_from").val(j),$(".calendarWrap.active").find(".calendar_to").val(k)},0)}}),$(".calendarWrap").on("click",function(){var b=$(this),c=b.find(".datepicker");b.addClass("active"),c.daterangepicker("open"),a(b)}),$(window).resize(function(){var b=$(".calendarWrap");a(b)}),$(document).scroll(function(){var b=$(".calendarWrap"),c=$(document).scrollTop();c>10&&a(b)}),$(".js-reset").on("click",function(){$(".calendarWrap.active").find(".datepicker").daterangepicker("clearRange"),$(".calendarWrap.active").find(".calendar_from").val(""),$(".calendarWrap.active").find(".calendar_to").val("")}))}),$(document).ready(function(){var a=($(this),$(".js-example-basic-single")),b=$(".js-approver_for_request"),c=$(".js-example-basic-multiple"),d=b.data("text");a.select2({minimumResultsForSearch:-1,escapeMarkup:function(a){return a}}),b.select2({minimumResultsForSearch:-1,placeholder:d,escapeMarkup:function(a){return a}}),c.select2({minimumResultsForSearch:-1,escapeMarkup:function(a){return a}})}),$(document).ready(function(){function a(){h=!0,d.find(".navigation_dropdown_block_wrap").animate({opacity:0},f,function(){d.find(".navigation_dropdown_block").animate({height:[0,"easeInOutQuart"]},g,function(){d.removeClass("active"),h=!1})})}function b(a){h=!0,d.addClass("active"),d.find(".navigation_dropdown_block").animate({height:["396px","easeInOutQuart"]},f,function(){d.find(".navigation_dropdown_block_wrap").animate({opacity:1},g,function(){h=!1})})}var c=$(this),d=$(".navigation_dropdown",c),e=$(".navigation_dropdown_block",c),f=500,g=200,h=!1;e.on("click",function(a){a.stopPropagation()}),$(document).scroll(function(){var a=$(document).scrollTop();a>78?($("ul.menu").addClass("scroll"),$(".menu_scroll_wrap").addClass("scrollWrap")):($("ul.menu").removeClass("scroll"),$(".menu_scroll_wrap").removeClass("scrollWrap"))}),initializeCheckboxes(),$("body").on("click",".navigation_dropdown",function(c){if(!h){var d=$(c.currentTarget);d.hasClass("active")?a():b()}}),$("body").on("click",function(b){if(!h){var c=$(b.currentTarget);d.hasClass("active")&&(c.hasClass("navigation_dropdown_block")||e.has(c))&&a()}})}),$(function(){function a(){c.off("click"),c.remove(),h.removeClass("popup_active")}function b(b){var i=_.template(f);c=$(i({data:b?b:{activity:{},toolbox:{},brand:{},accessManagement:{},adGroups:[]}}));var j=c.find("form");b&&b.id&&j.find('[name="adGroups"]').children().each(function(){var a=$(this);_.where(b.adGroups,a.val()).length&&a.attr("selected","selected")}),c.on("click",".btn-save",function(c){c.preventDefault();var f={id:b?b.id:null,name:j.find('[name="name"]').val(),activity:{view:j.find('[name="activityView"]').is(":checked"),change:j.find('[name="activityChange"]').is(":checked"),approve:j.find('[name="activityApprove"]').is(":checked")},toolbox:{view:j.find('[name="toolboxView"]').is(":checked"),change:j.find('[name="toolboxChange"]').is(":checked"),approve:j.find('[name="toolboxApprove"]').is(":checked")},brand:{view:j.find('[name="brandView"]').is(":checked"),change:j.find('[name="brandChange"]').is(":checked"),approve:j.find('[name="brandApprove"]').is(":checked")},accessManagement:{view:j.find('[name="accessManagementView"]').is(":checked"),change:j.find('[name="accessManagementChange"]').is(":checked"),approve:j.find('[name="accessManagementApprove"]').is(":checked")},adGroups:j.find('[name="adGroups"]').val()};$.ajax({url:j.attr("action"),type:"GET",dataType:"json",data:f,success:function(c){if(a(),b&&b.id){var h=_.findIndex(accessManagementData,function(a){return a.id==b.id}),i=e.filter('[data-id="'+b.id+'"]');$.extend(accessManagementData[h],f),accessManagementData[h].adGroups=f.adGroups,i.find(".access-management-name").text(b.name),i.find(".access-management-activity-view").text(b.activity.view?"Yes":"No"),i.find(".access-management-activity-change").text(b.activity.change?"Yes":"No"),i.find(".access-management-activity-approve").text(b.activity.approve?"Yes":"No"),i.find(".access-management-ad-groups").html(b.adGroups?b.adGroups.join(", <br>"):""),i.find(".access-management-toolbox-view").text(b.toolbox.view?"Yes":"No"),i.find(".access-management-toolbox-change").text(b.toolbox.change?"Yes":"No"),i.find(".access-management-toolbox-approve").text(b.toolbox.approve?"Yes":"No"),i.find(".access-management-brand-view").text(b.brand.view?"Yes":"No"),i.find(".access-management-brand-change").text(b.brand.change?"Yes":"No"),i.find(".access-management-brand-approve").text(b.brand.approve?"Yes":"No"),i.find(".access-management-access-management-view").text(b.accessManagement.view?"Yes":"No"),i.find(".access-management-access-management-change").text(b.accessManagement.change?"Yes":"No"),i.find(".access-management-access-management-approve").text(b.accessManagement.approve?"Yes":"No")}else{f.id||(f.id=Math.random()+"");var j=_.template(g),k=j({data:c.data?c.data:f,isOdd:e.length%2==0});d.append(k),e=d.find(".access-management-item"),accessManagementData.push(c.data?c.data:f)}},error:function(a){alert("Something went wrong")}})}),c.on("click",".btn-cansel",function(b){b.preventDefault(),a()}),h.addClass("popup_active").append(c),$(".js-example-basic-multiple").select2({minimumResultsForSearch:-1,escapeMarkup:function(a){return a}}),initializeCheckboxes()}var c,d=$(".access-management-block"),e=d.find(".access-management-item"),f=$("#popup-acces-managment-tpl").html(),g=$("#popup-acces-item-tpl").html(),h=$("#popup_block");d.on("click",".btn_delete",function(a){a.preventDefault();var b=$(a.currentTarget).closest(".access-management-item"),c=b.data("id");$.ajax({url:"/request.json",type:"GET",dataType:"json",data:{id:c},success:function(){var a=_.findIndex(accessManagementData,function(a){return a.id==c});accessManagementData.splice(a,1),b.remove(),e=d.find(".access-management-item")},error:function(){alert("Something went wrong")}})}),d.on("click",".btn_edit",function(a){a.preventDefault();var c=$(a.currentTarget).closest(".access-management-item").data("id")+"",d=_.where(accessManagementData,{id:c})[0];b(d)}),$(".btn-add-role").on("click",function(a){a.preventDefault(),b()}),h.on("click","#popup_fone",function(){a()})}),$(function(){$(document).on("click",function(a){var b=$(".status_wrap");0===b.has(a.target).length&&0===$(".datepicker_bottom_block").has(a.target).length&&0===$(".comiseo-daterangepicker").has(a.target).length&&b.find(".calendar_block").hide()})}),$(function(){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&($(".channel:nth-child(2n+1)").addClass("odd"),$(".document:nth-child(2n+1)").addClass("odd")),$(document).on("click",function(a){var b=$(".status_wrap");0===b.has(a.target).length&&0===$(".datepicker_bottom_block").has(a.target).length&&0===$(".comiseo-daterangepicker").has(a.target).length&&b.removeClass("active").find(".calendar_block").hide()})}),$(function(){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&$(".wrap_table > div:nth-child(odd)").addClass("odd")}),$(function(){function a(a){return/^[a-zA-Z0-9_\-\.]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/.test(a.val())?void a.removeClass("error").addClass("complete"):(alert("Ошибка в E-mail!"),a.focus(),a.addClass("error").removeClass("complete"),!1)}var b=$(".js-mail");b.on("change",function(){var b=$(this);a(b)})}),$(function(){var a=$(".js-uploader");a.each(function(){{var a=$(this),b=a.text();new qq.FileUploader({element:this,action:"/server/upload",uploadButtonText:b,allowedExtensions:["jpg","jpeg","png","gif"],onSubmit:function(){a.text("Uploading...")},onComplete:function(){a.text(b)}})}})}),$(function(){function a(){c.off("click"),c.remove(),d.removeClass("popup_active")}function b(b){var i=_.template(e);c=$(i({data:b?b:{}}));var j=c.find("form");c.on("click",".btn-save",function(c){c.preventDefault();var d={id:b?b.id:null,subject:j.find('[name="subject"]').val(),text:j.find('[name="text"]').val()};$.ajax({url:j.attr("action"),type:"GET",dataType:"json",data:d,success:function(c){if(a(),b&&b.id){var e=_.findIndex(emailNotificationsData,function(a){return a.id==b.id}),i=h.filter('[data-id="'+b.id+'"]');$.extend(emailNotificationsData[e],d),i.find(".email-notification-label").text(b.label),i.find(".email-notification-subject").text(b.subject),i.find(".email-notification-text").text(b.text)}else{d.id||(d.id=Math.random()+"");var j=_.template(f),k=j({data:c.data?c.data:d,isOdd:h.length%2==0});g.append(k),h=g.find(".email-notification-item"),emailNotificationsData.push(c.data?c.data:d)}},error:function(a){alert("Something went wrong")}})}),d.addClass("popup_active").append(c)}var c,d=$("#popup_block"),e=$("#edit-notification-tpl").html(),f=$("#email-notification-item-tpl").html(),g=$(".email-notification-block"),h=g.find(".email-notification-item");-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&$(".wrap_table > div:nth-child(odd)").addClass("odd"),$(".btn-add-notification").on("click",function(a){a.preventDefault(),b()}),g.on("click",".btn-edit",function(a){a.preventDefault();var c=$(a.currentTarget).closest(".email-notification-item").data("id")+"",d=_.where(emailNotificationsData,{id:c})[0];b(d)}),d.on("click","#popup_fone",function(){a()})}),$(function(){-1!=navigator.userAgent.toLowerCase().indexOf("msie")&&$(".wrap_table > div:nth-child(odd)").addClass("odd")}),$(function(){{var a=$(".js-uploader");$(".js-basket")}a.each(function(){{var a=$(this),b=a.text(),c="/img/parlament_bg.jpg",d="123",e="Tititi";new qq.FileUploader({element:this,action:"/server/upload",allowedExtensions:["jpg","jpeg","png","gif"],onSubmit:function(){a.text("Uploading...")},onComplete:function(f,g,h){if(a.text(b),a.parent().hasClass("block_img"))a.hide(),a.closest(".block_img").append('<img src="'+c+'" alt="">');else{var i=_.template($("#template").html());a.closest("form").find(".attachments_block_wrap").append(i({url:c,size:d,name:e}))}}})}}),$(".block_img").on("click","img",function(a){a.preventDefault(),$(this).closest(".block_img").find(".js-uploader").trigger("click")}),$("body").on("click",".js-basket",function(a){a.preventDefault(),$(this).closest(".block").remove()}),$(document).on("click",function(a){var b=$(".status_wrap");0===b.has(a.target).length&&0===$(".datepicker_bottom_block").has(a.target).length&&0===$(".comiseo-daterangepicker").has(a.target).length&&b.find(".calendar_block").hide()})}),$(function(){function a(a){return/^[a-zA-Z0-9_\-\.]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$/.test(a.val())?void a.removeClass("error").addClass("complete"):(alert("Ошибка в E-mail!"),a.focus(),a.addClass("error").removeClass("complete"),!1)}var b=$(".js-mail");b.on("change",function(){var b=$(this);a(b)})}),$(function(){function a(a){return""==a.val()?(alert("пароль не указан"),a.focus(),a.addClass("error"),!1):a.val().length<4?(alert(" должно быть не менее 4-х символов!"),a.focus(),a.addClass("error"),!1):/^[a-zA-Z0-9]+$/.test(a.val())?void 0:(alert("пароль должен состоять из комбинации латинских букв и арабских цифр!"),a.focus(),a.addClass("error"),!1)}function b(a,b){return""==a.val()||""==b.val()?(b.focus(),!1):void(a.val()!==b.val()?(a.addClass("error"),a.removeClass("complete"),b.addClass("error"),b.removeClass("complete")):(a.removeClass("error"),a.addClass("complete"),b.removeClass("error"),b.addClass("complete")))}var c=$(".password_wrap input");c.on("change",function(){var c=$(this),d=c.parent().siblings("div").find("input");a(c),b(c,d)})}),$(document).ready(function(){$(".ico_star").click(function(){$(this).toggleClass("active")})}),$(document).ready(function(){$(".ico_star").click(function(){$(this).toggleClass("active")})}),$(function(){var a=$(".js-uploader"),b=$(".js-img_wrap");a.each(function(){{var a=$(this),b=a.text(),c="/img/parlament_bg.jpg";new qq.FileUploader({element:this,action:"/server/upload",uploadButtonText:b,allowedExtensions:["jpg","jpeg","png","gif"],onSubmit:function(){a.text("Uploading...")},onComplete:function(){a.text(b),a.hide(),a.closest(".js-img_wrap").append('<img src="'+c+'" alt="">')}})}}),b.on("click","img",function(a){a.preventDefault(),$(this).closest(".js-img_wrap").find(".js-uploader").trigger("click")})}),console.log("asd"),$(document).ready(function(){$("body").on("click",".js-basket",function(a){a.preventDefault(),$(this).closest(".block").remove()})}),$(document).ready(function(){$(".ico_star").click(function(){$(this).toggleClass("active")})});