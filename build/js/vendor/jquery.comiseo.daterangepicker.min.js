!function(a,b,c){function d(b,c,d){function e(a){f.button("option","label",a)}var f,g;return g="drp_autogen"+i++,a('label[for="'+b.attr("id")+'"]').attr("for",g),f=a('<button type="button"></button>').addClass(c+"-triggerbutton").attr({title:b.attr("title"),tabindex:b.attr("tabindex"),id:g}).button({icons:{secondary:d.icon},label:d.initialText}),{getElement:function(){return f},getLabel:function(){return f.button("option","label")},setLabel:e,reset:function(){b.val("").change(),e(d.initialText)}}}function e(b,c,d){var e,f;return function(){e=a("<div></div>").addClass(b+"-presets"),f=a("<ul></ul>"),a.each(c.presetRanges,function(){a('<li><a href="#">'+this.text+"</a></li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(d).appendTo(f)}),e.append(f),f.menu().data("ui-menu").delay=0}(),{getElement:function(){return e}}}function f(b,c){function d(){setTimeout(function(){e(),d()},moment().endOf("day")-moment())}function e(){f.datepicker("refresh"),f.datepicker("setDate",null)}var f,g={start:null,end:null};return f=a("<div></div>",{"class":b+"-calendar ui-widget-content"}),f.datepicker(a.extend({},c.datepickerOptions,{beforeShowDay:function(a){var b=[!0,g.start&&(+a===+g.start||g.end&&g.start<=a&&a<=g.end)?"ui-state-highlight":""],d=[!0,""];return c.datepickerOptions.hasOwnProperty("beforeShowDay")&&(d=c.datepickerOptions.beforeShowDay(a)),[b[0]&&d[0],b[1]+" "+d[1]]},onSelect:function(b,d){var e=a.datepicker.parseDate(c.datepickerOptions.dateFormat||a.datepicker._defaults.dateFormat,b);!g.start||g.end?(g.start=e,g.end=null):e<g.start?(g.end=g.start,g.start=e):g.end=e,c.datepickerOptions.hasOwnProperty("onSelect")&&c.datepickerOptions.onSelect(b,d)}})),d(),{getElement:function(){return f},scrollToRangeStart:function(){g.start&&f.datepicker("setDate",g.start)},getRange:function(){return g},setRange:function(a){g=a,e()},refresh:e,reset:function(){g={start:null,end:null},e()}}}function g(b,c,d){var e,f,g;return f=a('<button type="button" class="ui-priority-primary"></button>').text(c.applyButtonText).button(),g=a('<button type="button" class="ui-priority-secondary"></button>').text(c.clearButtonText).button(),c=a('<button type="button" class="ui-priority-secondary"></button>').text(c.cancelButtonText).button(),e=a("<div></div>").addClass(b+"-buttonpanel").append(f).append(g).append(c),d&&(f.click(d.onApply),g.click(d.onClear),c.click(d.onCancel)),{getElement:function(){return e}}}function h(c,h){function i(){if(h.autoFitCalendars){var c=a(b).width(),d=w.outerWidth(!0),e=A.getElement(),f=e.datepicker("option","numberOfMonths"),g=f;if(d>c){for(;f>1&&w.outerWidth(!0)>c;)e.datepicker("option","numberOfMonths",--f);f!==g&&(i.monthWidth=(d-w.outerWidth(!0))/(g-f))}else for(;f<i.numberOfMonths&&c-w.outerWidth(!0)>=i.monthWidth;)e.datepicker("option","numberOfMonths",++f);r(),E=!1}}function j(){y.getElement().click(v),y.getElement().keydown(s),x.click(u),a(b).resize(function(){D?i():E=!0})}function k(b){var c=h.dateFormat;return a.datepicker.formatDate(c,b.start)+(+b.end!==+b.start?h.rangeSplitter+a.datepicker.formatDate(c,b.end):"")}function l(b){var c=h.altFormat,d={};return d.start=a.datepicker.formatDate(c,b.start),d.end=a.datepicker.formatDate(c,b.end),JSON.stringify(d)}function m(b){var c=h.altFormat,d=null;if(b)try{d=JSON.parse(b,function(b,d){return b?a.datepicker.parseDate(c,d):d})}catch(e){}return d}function n(){var a=m(c.val());a?(y.setLabel(k(a)),A.setRange(a)):A.reset()}function o(a){var b=a||A.getRange();b.start&&(b.end||(b.end=b.start),a&&A.setRange(b),y.setLabel(k(b)),c.val(l(b)).change(),h.onChange)&&h.onChange()}function p(){y.reset(),A.reset(),c.val("")}function q(){var b=a(this),c=b.data("dateStart")().startOf("day").toDate(),b=b.data("dateEnd")().startOf("day").toDate();return A.setRange({start:c,end:b}),h.applyOnMenuSelect&&(u(),o()),!1}function r(){w.position({my:"left top",at:"left bottom"+(0>h.verticalOffset?h.verticalOffset:"+"+h.verticalOffset),of:y.getElement(),collision:"flipfit flipfit",using:function(a,b){var c,d=K,e=b.element.top+b.element.height/2,f=b.target.top+b.target.height/2,g=L;K=b.element.left+b.element.width/2>b.target.left+b.target.width/2?G:F,K!==d&&(h.mirrorOnCollision&&(c=K===F?z:A,w.children().first().append(c.getElement())),w.removeClass(C+"-"+J[d]),w.addClass(C+"-"+J[K])),w.css({left:a.left,top:a.top}),L=e>f?I:H,L!==g&&(null!==g&&y.getElement().removeClass(C+"-"+J[g]),y.getElement().addClass(C+"-"+J[L])),d=L===I&&b.element.top-b.target.top!==b.target.height+h.verticalOffset||L===H&&b.target.top-b.element.top!==b.element.height+h.verticalOffset,y.getElement().toggleClass(C+"-vfit",d)}})}function s(b){switch(b.which){case a.ui.keyCode.UP:case a.ui.keyCode.DOWN:b.preventDefault(),b.stopPropagation(),t();break;case a.ui.keyCode.ESCAPE:b.preventDefault(),b.stopPropagation(),u();break;case a.ui.keyCode.TAB:u()}}function t(){D||(y.getElement().addClass(C+"-active"),x.show(),D=!0,E&&i(),A.scrollToRangeStart(),w.show(),r()),h.onOpen&&h.onOpen()}function u(){D&&(w.hide(),x.hide(),y.getElement().removeClass(C+"-active"),D=!1),h.onClose&&h.onClose()}function v(){D?u():t()}var w,x,y,z,A,B,C="comiseo-daterangepicker",D=!1,E=!1,F=0,G=1,H=2,I=3,J=["left","right","top","bottom"],K=G,L=null;return function(){y=d(c,C,h),z=e(C,h,q),A=f(C,h),i.numberOfMonths=h.datepickerOptions.numberOfMonths,i.numberOfMonths instanceof Array&&(h.autoFitCalendars=!1),B=g(C,h,{onApply:function(){u(),o()},onClear:function(){u(),p()},onCancel:function(){u(),n()}}),w=a("<div></div>",{"class":C+" "+C+"-"+J[K]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(a("<div></div>",{"class":C+"-main ui-widget-content"}).append(z.getElement()).append(A.getElement())).append(a('<div class="ui-helper-clearfix"></div>').append(B.getElement())).hide(),c.hide().after(y.getElement()),x=a("<div></div>",{"class":"ui-front "+C+"-mask"}).hide(),a("body").append(x).append(w),i(),n(),j()}(),{toggle:v,destroy:function(){w.remove(),y.getElement().remove(),c.show()},open:t,close:u,setRange:o,getRange:function(){return m(c.val())},clearRange:p,reset:n,getContainer:function(){return w}}}var i=0;a.widget("comiseo.daterangepicker",{version:"0.4.0",options:{presetRanges:[{text:"Today",dateStart:function(){return moment()},dateEnd:function(){return moment()}},{text:"Yesterday",dateStart:function(){return moment().subtract("days",1)},dateEnd:function(){return moment().subtract("days",1)}},{text:"Last 7 Days",dateStart:function(){return moment().subtract("days",6)},dateEnd:function(){return moment()}},{text:"Last Week (Mo-Su)",dateStart:function(){return moment().subtract("days",7).isoWeekday(1)},dateEnd:function(){return moment().subtract("days",7).isoWeekday(7)}},{text:"Month to Date",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment()}},{text:"Previous Month",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Year to Date",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],verticalOffset:0,initialText:"Select date range...",icon:"ui-icon-triangle-1-s",applyButtonText:"Apply",clearButtonText:"Clear",cancelButtonText:"Cancel",rangeSplitter:" - ",dateFormat:"M d, yy",altFormat:"yy-mm-dd",mirrorOnCollision:!0,applyOnMenuSelect:!0,autoFitCalendars:!0,onOpen:null,onClose:null,onChange:null,datepickerOptions:{numberOfMonths:3,maxDate:0}},_create:function(){this._dateRangePicker=h(this.element,this.options)},_destroy:function(){this._dateRangePicker.destroy()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},setRange:function(a){this._dateRangePicker.setRange(a)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}})}(jQuery,window);